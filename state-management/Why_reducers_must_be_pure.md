# 리듀서 함수가 순수 함수여야 하는 이유

## 순수 함수

순수함수는 함수형 프로그래밍의 핵심 패러다임으로,  
항상 동일한 입력에 대해 동일한 출력을 생성해야 한다.

수학에서의 함수 y=f(x)의 개념을 프로그래밍으로 옮긴 것이 순수 함수이다.

함수형 프로그래밍에서 순수 함수는 사이드 이펙트를 줄이고, 모듈화 수준을 높여 예측 가능하고 안전한 코드를 작성하는 프로그래밍 패러다임이다.

순수 함수는 사이드 이펙트가 없어야 한다.  
사이드 이펙트란 함수 외부의 상태를 참조하거나 변경하는 모든 행위이다.

순수 함수는 함수 외부 상태를 변경하는 등, 함수 출력 생성 이외의 행위를 수행해서는 안되고,  
외부 상태를 참조하여 항상 동일한 출력 생성을 저해해서도 안된다.  
함수 외부에 종속 되어서도, 상호 작용을 해셔도 안된다.

따라서 순수 함수는 사이드 이펙트가 없는, 함수 내부 상태만을 참조하여 출력을 생성해야 한다.

## 리듀서 함수가 순수 함수여야 하는 이유

리듀서 함수는 몇 가지 중요한 이유로 순수 함수여야 한다.

1. 순수 함수는 항상 동일한 입력에 대해 동일한 출력을 생성한다.  
   리덕스의 맥락에서 이것은 특정 상태와 액션이 주어지면 리듀서 함수는 항상 동일한 상태를 생성한다는 것을 의미한다.

2. 순수 함수는 외부 종속성이나 상호작용에 대한 걱정이 없어, 단위 테스트 작성이 간단하다.

3. 리덕스의 Time-Travel 디버깅은 리듀서 함수가 예측 가능한 순수 함수이기 때문에 과거 상태를 안정적으로 재현할 수 있다.

4. 순수 함수 리듀서는 원본 상태 객체가 변경되지 않도록 보장하여 올바른 상태 변경을 보장해준다.

요약하자면, 앱 내 상태 관리의 신뢰성, 유지 관리 가능성 및 예측 가능성이 보장되어 추론과 디버깅을 쉽게 해준다.

## Thunk

앞서 말했듯, http 요청과 같은 비동기 요청은 순수 함수인 리듀서 함수에서는 사용하면 안된다.

Thunk를 사용하면 리듀서를 순수 함수로 유지하며 스토어에서 비동기 요청을 실행시킬 수 있다.

Thunk는 특정 작업을 함수로 감싸 작업을 지연시키는 미들웨어 패턴이다.

액션 객체를 디스패치 하는 것이 아닌 함수를 디스패치하며, 해당 함수에 비동기 요청 및 추가적인 코드를 작성할 수 있다.
